---
title:  'Computational Musicology'
author: 'John Ashley Burgoyne'
date:   'February--March 2020'
output: 
    flexdashboard::flex_dashboard:
        storyboard: true
        theme: flatly
---

```{r setup}
# In order to use these packages, we need to install flexdashboard, plotly, and Cairo.
library(tidyverse)
library(plotly)
library(spotifyr)
library(stringr)
source('spotify.R')
```

### Introduction

Lorem ipsum
***

Lorem ipsum


### The Grammys are angrier than the Edisons

```{r}
# import albums
the_red_album <- get_playlist_audio_features('bobleynse', '0ghyYvT2B8me30mShW8pUB')
the_blue_album <- get_playlist_audio_features('bobleynse', '0UfoFrm53Q2G7kuQMjchvs')

# preprocess data
total <- rbind(the_red_album, the_blue_album)
total <- unite(total, "name", track.album.release_date, track.album.name, sep="\n")
total$name <- str_sub(total$name, 1, str_length(total$name)-13)

# make the plot
Valence_energy <- ggplot(total, aes(x=energy, y=valence, col=playlist_name, size=(track.duration_ms/1000)/60)) + geom_point(alpha=0.4) + facet_wrap(facet="name", nrow=1, ncol=13, shrink = TRUE) + scale_color_manual(values= c("#03b5fc", "#bf0d00")) + scale_x_continuous(breaks=c(0, 0.5, 1)) + theme(legend.position="bottom", strip.text.x = element_text(angle = 90)) + labs(x="Energy", y="Valence", size="Duration in min", col="")




ggplotly(Valence_energy)
```

***

For this visualisation from Week 7, I took playlists of the pop music presented at the Grammy awards (US) and the Edison awards (NL) in 2019. Using `ggplotly`, the visualisation became interactive.

The *x* axis shows valence and the *y* axis shows Spotify's ‘energy’ feature, which is roughly analogous to the notion of arousal in psychological research on emotion. Under this model, the quadrants of each graph, starting clockwise from the top left, represent angry, happy, relaxed, and sad music. The size of each point is proportional to the average volume of the track.

The visualisation shows that in 2019, the pop music at the Grammys was (according to Spotify) rather angrier and rather louder than the music at the Edisons.
